<div *ngIf="cleaner" class="max-w-4xl mx-auto p-6">
  <!-- Main Profile Card -->
  <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 mb-6">
    <!-- Header Section -->
    <div class="flex items-start gap-6 mb-8">
      <!-- Profile Picture -->
      <div
        class="w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 flex items-center justify-center text-2xl font-bold text-blue-600 shrink-0 border-4 border-white shadow-lg">
        {{ getInitials(cleaner.fullName) }}
      </div>

      <!-- Basic Info -->
      <div class="flex-1">
        <div class="flex items-center justify-between mb-4">
          <h1 class="text-3xl font-bold text-gray-900">{{ cleaner.fullName }}</h1>
          <button
            class="bg-yellow-400 hover:bg-yellow-500 text-white font-semibold px-6 py-3 rounded-full transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
            [routerLink]="['/cleaner', cleaner.id, 'reserve']">
            Rezervi≈°i
          </button>
        </div>

        <!-- Location -->
        <p class="text-gray-600 mb-4">
          üìç
          <span *ngIf="cleaner.address && cleaner.address !== 'Location not specified'">{{ cleaner.address }}</span>
          <span *ngIf="!cleaner.address || cleaner.address === 'Location not specified'"
            class="italic text-gray-500">Address will be provided upon booking</span>
        </p>

        <!-- Bio -->
        <div class="mb-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">Bio</h3>
          <p class="text-gray-600 leading-relaxed" *ngIf="cleaner.bio && cleaner.bio.length > 10">{{ cleaner.bio }}</p>
          <p class="text-gray-500 italic" *ngIf="!cleaner.bio || cleaner.bio.length <= 10">
            Professional cleaner with experience in residential and commercial cleaning. More details available upon
            contact.
          </p>
        </div>
      </div>
    </div>

    <!-- Details Grid -->
    <div class="grid md:grid-cols-3 gap-8 mb-8">
      <!-- Cleaning Zones -->
      <div>
        <h3 class="text-lg font-semibold text-gray-800 mb-3">Cleaning Zones</h3>
        <ul class="space-y-2" *ngIf="cleaner.zones && cleaner.zones.length > 0">
          <li *ngFor="let zone of cleaner.zones" class="flex items-center text-gray-600">
            <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
            {{ zone }}
          </li>
        </ul>
        <div *ngIf="!cleaner.zones || cleaner.zones.length === 0" class="text-gray-500 italic">
          <div class="flex items-center mb-2">
            <span class="w-2 h-2 bg-gray-400 rounded-full mr-3"></span>
            Available citywide
          </div>
          <p class="text-sm">Specific zones will be confirmed during booking process</p>
        </div>
      </div>

      <!-- Price per hour -->
      <div>
        <h3 class="text-lg font-semibold text-gray-800 mb-3">Price per hour</h3>
        <div class="text-gray-600">
          <p class="text-2xl font-bold text-blue-600" *ngIf="cleaner.hourlyRate && cleaner.hourlyRate > 0">
            {{ cleaner.hourlyRate }} <span class="text-sm font-normal">BAM</span>
          </p>
          <p class="text-lg text-gray-500 italic" *ngIf="!cleaner.hourlyRate || cleaner.hourlyRate <= 0">
            Price upon request
          </p>
          <p class="text-sm" *ngIf="cleaner.minHours && cleaner.minHours > 0">minimum: {{ cleaner.minHours }}h</p>
          <p class="text-sm text-gray-500" *ngIf="!cleaner.minHours || cleaner.minHours <= 0">Flexible booking duration
          </p>
        </div>
      </div>

      <!-- Rating -->
      <div>
        <h3 class="text-lg font-semibold text-gray-800 mb-3">Rating</h3>
        <div class="flex items-center gap-2" *ngIf="cleaner.rating && cleaner.rating > 0">
          <!-- Stars -->
          <div class="flex text-yellow-400">
            <svg *ngFor="let i of [1,2,3,4,5]" class="w-5 h-5 fill-current"
              [class.text-yellow-400]="i <= mathFloor(cleaner.rating)"
              [class.text-gray-300]="i > mathFloor(cleaner.rating)" viewBox="0 0 20 20">
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
            </svg>
          </div>
          <span class="text-gray-600">{{ cleaner.rating | number:'1.1-2' }}/5.0</span>
          <span class="text-blue-600 text-sm">({{ cleaner.reviewCount }} reviews)</span>
        </div>
        <div *ngIf="!cleaner.rating || cleaner.rating <= 0" class="text-gray-500 italic">
          <div class="flex items-center gap-2 mb-1">
            <div class="flex text-gray-300">
              <svg *ngFor="let i of [1,2,3,4,5]" class="w-5 h-5 fill-current" viewBox="0 0 20 20">
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
              </svg>
            </div>
          </div>
          <p class="text-sm">New cleaner - No reviews yet</p>
          <p class="text-xs">Be the first to leave a review!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Service Overview -->
  <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Service Overview</h2>

    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
      <div *ngFor="let service of cleaner.services"
        class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-100 hover:shadow-md transition-all duration-200">
        <div class="text-center">
          <div class="text-4xl mb-3">{{ service.icon }}</div>
          <h3 class="text-lg font-semibold text-blue-700 mb-2">{{ service.name }}</h3>
          <p class="text-sm text-gray-600 leading-relaxed">{{ service.description }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Client Reviews Section -->
  <div *ngIf="allCleanerReviews.length > 0" class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 mt-6">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-900">Client Reviews</h2>
      <div class="flex items-center gap-2">
        <div class="flex text-yellow-400">
          <svg *ngFor="let i of [1,2,3,4,5]" class="w-5 h-5 fill-current"
            [class.text-yellow-400]="i <= mathFloor(cleaner.rating)"
            [class.text-gray-300]="i > mathFloor(cleaner.rating)" viewBox="0 0 20 20">
            <path
              d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
        </div>
        <span class="font-medium text-gray-900">{{ cleaner.rating | number:'1.1-2' }}</span>
        <span class="text-gray-600">({{ cleaner.reviewCount }} reviews)</span>
      </div>
    </div>

    <div class="space-y-4">
      <div *ngFor="let review of allCleanerReviews" class="border-b border-gray-100 pb-4 last:border-b-0">
        <div class="flex items-start gap-4">
          <div
            class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold">
            {{ (review.cleanerName || 'Client').charAt(0) || 'C' }}
          </div>
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-2">
              <h4 class="font-semibold text-gray-900">{{ review.cleanerName || 'Anonymous Client' }}</h4>
              <div class="flex text-yellow-400">
                <svg *ngFor="let i of [1,2,3,4,5]" class="w-4 h-4 fill-current"
                  [class.text-yellow-400]="i <= review.rating" [class.text-gray-300]="i > review.rating"
                  viewBox="0 0 20 20">
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                </svg>
              </div>
            </div>
            <p class="text-gray-600">{{ review.comment }}</p>
            <p class="text-sm text-gray-400 mt-1">{{ review.date | date:'mediumDate' }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!cleaner" class="text-center text-gray-500 py-10">
  Loading cleaner data...
</div>